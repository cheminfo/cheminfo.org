<!DOCTYPE html>
<html>
<head lang='en'>
    <meta charset='UTF-8'>
    <title>cheminfo.org</title>
    <script src='http://www.lactame.com/lib/uri.js/1.14.1/URI.min.js'></script>
</head>
<body>
<div id='ci-visualizer' config='http://visualizer.epfl.ch/cheminfo/_design/flavor/_list/config/alldocs?key="default"'></div>
<script>
    window.onload = function () {
        var visualizer = document.createElement('script');

        var url = new URI(document.location.href);
        var query = url.search(true);

        var version = 'latest',
            flavor = 'default';

        var visualizerDiv = document.getElementById('ci-visualizer');

        if (query) {
            if (query.v) {
                version = query.v;
            }
            if (query.flavor) {
                flavor = query.flavor;
            }
            if (!query.viewURL) {
                visualizerDiv.setAttribute('viewURL', 'http://visualizer.epfl.ch/cheminfo/554613d831e22b95c6eb805bec1437a2/view.json');
            }
        }

        visualizerDiv.setAttribute('config', 'http://visualizer.epfl.ch/cheminfo/_design/flavor/_list/config/alldocs?key="' + flavor + '"');

        var prefix = 'http://www.lactame.com/visualizer/';
        visualizer.setAttribute('data-main', prefix + version + '/init');
        visualizer.setAttribute('src', prefix + version + '/components/requirejs/require.js');
        document.head.appendChild(visualizer);
    }
</script>
</body>
</html>
